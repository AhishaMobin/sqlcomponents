SELECT T1.TABLE_NAME,        
        T1.COMMENTS TABLE_COMMENTS,
        T1.TABLE_TYPE,
        T1.COLUMN_NAME,
        T1.DATA_TYPE,
        T1.DATA_SCALE,
        T1.DATA_PRECISION,
        T1.NULLABLE,
        T1.COLUMN_COMMENTS COLUMN_COMMENTS,
        T2.POSITION PK_INDEX,
		T3.CONSTRAINT_NAME UNIQUE_CONSTRAINT,
        T4.REFERENCE_TABLE,
        T4.REFERENCE_COLUMN
FROM 
(

(
SELECT C_TABLE.TABLE_NAME,
        C_TABLE_COMMENTS.COMMENTS,
        C_TABLE_COMMENTS.TABLE_TYPE,
        C_TABLE_COLUMN.COLUMN_NAME,
        C_TABLE_COLUMN.DATA_TYPE,
        C_TABLE_COLUMN.DATA_SCALE,
        DECODE(C_TABLE_COLUMN.CHAR_LENGTH,0,C_TABLE_COLUMN.DATA_PRECISION,C_TABLE_COLUMN.CHAR_LENGTH) AS DATA_PRECISION,  
        C_TABLE_COLUMN.NULLABLE,		        
        C_TABLE_COLUMN_COMMENTS.COMMENTS COLUMN_COMMENTS        
    FROM 
        USER_TABLES C_TABLE,
        USER_TAB_COMMENTS C_TABLE_COMMENTS,
        USER_TAB_COLS C_TABLE_COLUMN,
        USER_COL_COMMENTS C_TABLE_COLUMN_COMMENTS
        
    WHERE 
        C_TABLE_COMMENTS.TABLE_NAME = C_TABLE.TABLE_NAME
        AND C_TABLE_COLUMN.TABLE_NAME = C_TABLE.TABLE_NAME
        AND C_TABLE_COLUMN_COMMENTS.TABLE_NAME = C_TABLE_COLUMN.TABLE_NAME
        AND C_TABLE_COLUMN_COMMENTS.COLUMN_NAME = C_TABLE_COLUMN.COLUMN_NAME
        AND @tableName1        
)
UNION
(
SELECT C_TABLE.VIEW_NAME TABLE_NAME,
        C_TABLE_COMMENTS.COMMENTS,
        C_TABLE_COMMENTS.TABLE_TYPE,
        C_TABLE_COLUMN.COLUMN_NAME,
        C_TABLE_COLUMN.DATA_TYPE,
        C_TABLE_COLUMN.DATA_SCALE,
        DECODE(C_TABLE_COLUMN.CHAR_LENGTH,0,C_TABLE_COLUMN.DATA_PRECISION,C_TABLE_COLUMN.CHAR_LENGTH) AS DATA_PRECISION,
        C_TABLE_COLUMN.NULLABLE,		        
        C_TABLE_COLUMN_COMMENTS.COMMENTS COLUMN_COMMENTS        
    FROM 
        USER_VIEWS C_TABLE,
        USER_TAB_COMMENTS C_TABLE_COMMENTS,
        USER_TAB_COLS C_TABLE_COLUMN,
        USER_COL_COMMENTS C_TABLE_COLUMN_COMMENTS
        
    WHERE 
        C_TABLE_COMMENTS.TABLE_NAME = C_TABLE.VIEW_NAME
        AND C_TABLE_COLUMN.TABLE_NAME = C_TABLE.VIEW_NAME
        AND C_TABLE_COLUMN_COMMENTS.TABLE_NAME = C_TABLE_COLUMN.TABLE_NAME
        AND C_TABLE_COLUMN_COMMENTS.COLUMN_NAME = C_TABLE_COLUMN.COLUMN_NAME
        AND @viewName1        
)
UNION
(
SELECT C_TABLE.MVIEW_NAME TABLE_NAME,
        C_TABLE_COMMENTS.COMMENTS,
        'MVIEW' TABLE_TYPE,
        C_TABLE_COLUMN.COLUMN_NAME,
        C_TABLE_COLUMN.DATA_TYPE,
        C_TABLE_COLUMN.DATA_SCALE,
        DECODE(C_TABLE_COLUMN.CHAR_LENGTH,0,C_TABLE_COLUMN.DATA_PRECISION,C_TABLE_COLUMN.CHAR_LENGTH) AS DATA_PRECISION,
        C_TABLE_COLUMN.NULLABLE,		        
        C_TABLE_COLUMN_COMMENTS.COMMENTS COLUMN_COMMENTS        
    FROM 
        USER_MVIEWS C_TABLE,
        USER_MVIEW_COMMENTS C_TABLE_COMMENTS,
        USER_TAB_COLS C_TABLE_COLUMN,
        USER_COL_COMMENTS C_TABLE_COLUMN_COMMENTS
        
    WHERE 
        C_TABLE_COMMENTS.MVIEW_NAME = C_TABLE.MVIEW_NAME
        AND C_TABLE_COLUMN.TABLE_NAME = C_TABLE.MVIEW_NAME
        AND C_TABLE_COLUMN_COMMENTS.TABLE_NAME = C_TABLE_COLUMN.TABLE_NAME
        AND C_TABLE_COLUMN_COMMENTS.COLUMN_NAME = C_TABLE_COLUMN.COLUMN_NAME
        AND @viewName2
)
        
) T1,
(        
SELECT C.TABLE_NAME, C.OWNER, C.CONSTRAINT_NAME,C.COLUMN_NAME,C.POSITION
      FROM USER_CONS_COLUMNS C
      WHERE CONSTRAINT_NAME = ( SELECT CONSTRAINT_NAME
	      FROM USER_CONSTRAINTS
	      WHERE TABLE_NAME = C.TABLE_NAME
	      AND CONSTRAINT_TYPE = 'P'      
	      )
      AND @tableName2
) T2,
(        
SELECT C.TABLE_NAME, C.OWNER, C.CONSTRAINT_NAME,C.COLUMN_NAME,C.POSITION
      FROM USER_CONS_COLUMNS C
      WHERE CONSTRAINT_NAME = ( SELECT CONSTRAINT_NAME
	      FROM USER_CONSTRAINTS
	      WHERE TABLE_NAME = C.TABLE_NAME
		  AND CONSTRAINT_NAME = C.CONSTRAINT_NAME
	      AND CONSTRAINT_TYPE = 'U'      
	      )
      AND @tableName2
) T3,
(
SELECT UNIQUE A.CONSTRAINT_NAME,
      A.TABLE_NAME,
      A.OWNER,
      C.COLUMN_NAME COLUMN_NAME ,
      B.TABLE_NAME REFERENCE_TABLE,
      B.COLUMN_NAME REFERENCE_COLUMN,
      A.R_CONSTRAINT_NAME ,
      C.POSITION
      FROM USER_CONSTRAINTS A, USER_CONS_COLUMNS B, USER_CONS_COLUMNS C
      WHERE A.R_CONSTRAINT_NAME=B.CONSTRAINT_NAME      
      AND A.CONSTRAINT_NAME=C.CONSTRAINT_NAME         
      AND A.TABLE_NAME=C.TABLE_NAME
      AND B.POSITION=C.POSITION      
      AND @tableName3
      ORDER BY A.CONSTRAINT_NAME, C.POSITION
) T4
WHERE 
T1.TABLE_NAME = T2.TABLE_NAME(+) 
AND T1.COLUMN_NAME = T2.COLUMN_NAME(+)
AND T1.TABLE_NAME = T3.TABLE_NAME(+) 
AND T1.COLUMN_NAME = T3.COLUMN_NAME(+)
AND T1.TABLE_NAME = T4.TABLE_NAME(+) 
AND T1.COLUMN_NAME = T4.COLUMN_NAME(+)
ORDER BY 
	T1.TABLE_NAME,PK_INDEX,T1.COLUMN_NAME
